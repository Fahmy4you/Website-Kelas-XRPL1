// Data Data 
const dataMurid = [
    {
      "absen": 1,
      "nama": "ABDUL HAFID",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 2,
      "nama": "AFRETA YUFRIDATUS SAFRINA",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 3,
      "nama": "AHLEN DAVA ADZ DZIKRI ROBIANSYAH",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 4,
      "nama": "AHMAD ROYHAN NAJIB",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 5,
      "nama": "AL ALIM",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 6,
      "nama": "ALE ATALLAH ABIMANYU",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 7,
      "nama": "ALVIANA NUR ROZIQOH",
      "gender": "Wanita",
      "peran": "Sekrtaris II",
    },
    {
      "absen": 8,
      "nama": "AMALIA RADISTI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 9,
      "nama": "ANDINI JESICA MAHARANI PUTRI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 10,
      "nama": "ANIS WIDYA PRATIWI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 11,
      "nama": "ANTIKA INES FEBRIANTI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 12,
      "nama": "ASTRID OCTAVIAN SYAH",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 13,
      "nama": "ASYAM RAFIF AUBIN FAWWAZ",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 14,
      "nama": "BUNGA FITRIA LESTARI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 15,
      "nama": "DARA IZATUL MILA",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 16,
      "nama": "DERI BAGUS SETYAWAN",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 17,
      "nama": "DEVITA WULANDARI",
      "gender": "Wanita",
      "peran": "Bendahara II",
    },
    {
      "absen": 18,
      "nama": "DEWA PERMANA PUTRA SETYADI",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 19,
      "nama": "DIA AYU WULANDARI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 20,
      "nama": "DIAN NOVITASARI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 21,
      "nama": "DINA AULIA RAHMADHANI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 22,
      "nama": "DINA SEPTIAN",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 23,
      "nama": "DOSICA FAUSSY YATUL IFFA",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 24,
      "nama": "EVAN BAGUS SETYAWAN",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 25,
      "nama": "FAHMY BIMA AZ ZUKHRUF",
      "gender": "Pria",
      "peran": "Ketua Kelas",
    },
    {
      "absen": 26,
      "nama": "FANIA RIZKY NOVITASARI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 27,
      "nama": "FEBRI HIYATUL AULIYA",
      "gender": "Wanita",
      "peran": "Bendahara I",
    },
    {
      "absen": 28,
      "nama": "FRISSA CAHYA KUNANGA",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 29,
      "nama": "GALIH JANUAR DWI ARIANTO",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 30,
      "nama": "GATHAN FAIRUZ IZZUDDIN",
      "gender": "Pria",
      "peran": "Waka Kelas",
    },
    {
      "absen": 31,
      "nama": "GITA NURMA WATI",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 32,
      "nama": "GRISELDA GALENA JA'AN",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 33,
      "nama": "HANI VALENTINA",
      "gender": "Wanita",
      "peran": "Anggota",
    },
    {
      "absen": 34,
      "nama": "JANANTA DHAFINE KRESNADYAKSA",
      "gender": "Pria",
      "peran": "Anggota",
    },
    {
      "absen": 35,
      "nama": "KIRANIA KHARISA SUYATNO",
      "gender": "Wanita",
      "peran": "Sekertaris I",
    },
    {
      "absen": 36,
      "nama": "KRISNIA WULANDARI",
      "gender": "Wanita",
      "peran": "Anggota",
    }
];
const dataPelajaran = [
  {
    hari: "senin",
    pelajaran: [
      {nama:'Upacara', jam: '07.00 - 07.45'},
      {nama:'Matematika', jam: '07.45 - 09.05'},
      {nama:'B. Inggris', jam: '09.05 - 10.25'},
      {nama:'Istirahat 1', jam: '10.25 - 10.40'},
      {nama:'S. Indonesia', jam: '10.40 - 12.00'},
      {nama:'Istirahat 2', jam: '12.00 - 12.40'},
      {nama:'B. Jawa', jam: '12.40 - 14.00'},
      {nama:'P P K N', jam: '14.00 - 15.20'},
    ]
  },
  {
    hari: "selasa",
    pelajaran: [
      {nama:'DDP. Keahlian', jam: '07.00 - 10.00'},
      {nama:'Istirahat 1', jam: '10.00 - 10.20'},
      {nama:'Matematika', jam: '10.20 - 11.50'},
      {nama:'Istirahat 2', jam: '11.50 - 12.30'},
      {nama:'PA. Islam', jam: '12.30 : 13.15'},
      {nama:'DDP. Keahlian', jam: '13.15 - 15.30'},
    ]
  },
  {
    hari: "rabu",
    pelajaran: [
      {nama:'B. Indonesia', jam: '07.00 - 08.30'},
      {nama:'IP. Alam Sosial', jam: '08.30 - 10.00'},
      {nama:'Istirahat 1', jam: '10.00 - 10.20'},
      {nama:'PA. Islam', jam: '10.20 - 11.50'},
      {nama:'Istirahat 2', jam: '11.50 - 12.30'},
      {nama:'B. Inggris', jam: '12.30 - 14.00'},
      {nama:'DDP. Keahlian', jam: '14.00 - 15.30'},
    ]
  },
  {
    hari: "kamis",
    pelajaran: [
      {nama:'P J O K', jam: '07.00 - 09.15'},
      {nama:'IP. Alam Sosial', jam: '09.15 - 10.00'},
      {nama:'Istirahat 1', jam: '10.00 - 10.20'},
      {nama:'IP. Alam Sosial', jam: '10.20 - 11.50'},
      {nama:'Istirahat 2', jam: '11.50 - 12.30'},
      {nama:'IP. Alam Sosial', jam: '12.30 - 13.15'},
      {nama:'DDP. Keahlian', jam: '13.15 - 15.30'},
    ]
  },
  {
    hari: "jumat",
    pelajaran: [
      {nama:"Jum'at Bersih", jam: '07.00 - 08.00'},
      {nama:'T. Informatika', jam: '08.00 - 10.20'},
      {nama:'Seni Budaya', jam: '10.20 - 10.55'},
      {nama:'Istirahat', jam: '10.55 - 12.30'},
      {nama:'Istirahat 2', jam: '11.50 - 12.30'},
      {nama:'Seni Budaya', jam: '12.30 - 13.10'},
      {nama:'B. Indonesia', jam: '13.10 - 14.20'},
    ]
  },
];
const gantiTextMurid = (element, absen) => {
  document.querySelector(element).innerText = dataMurid[absen-1].nama;
}
const getNamaMurid = (absen) => dataMurid[absen - 1].nama
const dataPiket = [
  {
    hari: 'senin',
    murid: [
      getNamaMurid(2),
      getNamaMurid(11),
      getNamaMurid(19),
      getNamaMurid(26),
      getNamaMurid(33),
      getNamaMurid(1),
      getNamaMurid(13),
      getNamaMurid(29)
    ]
  },
  {
    hari: 'selasa',
    murid: [
      getNamaMurid(7),
      getNamaMurid(12),
      getNamaMurid(20),
      getNamaMurid(27),
      getNamaMurid(35),
      getNamaMurid(3),
      getNamaMurid(16),
    ]
  },
  {
    hari: 'rabu',
    murid: [
      getNamaMurid(8),
      getNamaMurid(14),
      getNamaMurid(21),
      getNamaMurid(28),
      getNamaMurid(36),
      getNamaMurid(4),
      getNamaMurid(18),
    ]
  },
  {
    hari: 'kamis',
    murid: [
      getNamaMurid(9),
      getNamaMurid(15),
      getNamaMurid(22),
      getNamaMurid(31),
      getNamaMurid(5),
      getNamaMurid(24),
      getNamaMurid(30),
    ]
  },
  {
    hari: 'jumat',
    murid: [
      getNamaMurid(10),
      getNamaMurid(17),
      getNamaMurid(23),
      getNamaMurid(32),
      getNamaMurid(6),
      getNamaMurid(25),
      getNamaMurid(34),
    ]
  },
];

// NAVBAR / HEADER Hamburger
const hamburgerBtn = document.querySelector("#navBurger"),
navBarList = document.querySelector(".navList");

hamburgerBtn.addEventListener("click", () => {
  hamburgerBtn.classList.toggle("diklik");
  navBarList.classList.toggle("active");
})

// Scrolling Navbar And Section
const headerNav = document.querySelector(".header"),
allSections = document.querySelectorAll("section"),
allNavLinks = document.querySelectorAll(".navList a");

window.onscroll = () => {
  allSections.forEach(section => {
    let top = window.scrollY,
    offset = section.offsetTop - 100,
    height = section.offsetHeight,
    idSection = section.getAttribute('id');
    
    if(top >= offset && top < offset + height) {
      allNavLinks.forEach(navLink => {
        navLink.classList.remove('active');
        document.querySelector(".header .navList a[href*="+ idSection +"]").classList.add('active')
      })
    }
  })
  
  headerNav.classList.toggle('discroll', window.scrollY > 50);
}

// Ketik Text
const textTypingElement = document.querySelector(".ketikText");
const wordsTyping = ['Bapak Guru', 'Ibu Guru', 'Teman Teman', 'Semuanya'];

// Set Variabel
let wordIndex = 0,
charIndex = 0,
isDeleting = false;

const typeFunction = () => {
  const currentWord = wordsTyping[wordIndex],
  currentChar = currentWord.substring(0, charIndex);
  textTypingElement.textContent = currentChar;
  
  textTypingElement.classList.add("stop-blinking");
  
  if(!isDeleting && charIndex < currentWord.length) {
    charIndex++;
    setTimeout(typeFunction, 200);
    
  } else if(isDeleting && charIndex > 0) {
    charIndex--;
    setTimeout(typeFunction, 150);
    
  } else {
    isDeleting = !isDeleting;
    textTypingElement.classList.remove('stop-blinking');
    wordIndex = !isDeleting ? (wordIndex + 1) % wordsTyping.length : wordIndex;
    setTimeout(typeFunction, 800);
    
  }
  
}
typeFunction(); // Call Function Ketik Text

// Structur Kelas
// Wali Kelas
document.querySelector('#waliKelas').innerText = "Ita Rismawati S.Kom";
// Ketua Kelas
gantiTextMurid('#ketuaKelas', 25)
// Waka Kelas
gantiTextMurid('#wakaKelas', 30)
// Sekertaris I
gantiTextMurid('#sekertaris1', 35)
// Sekertaris 2
gantiTextMurid('#sekertaris2', 7)
// Bendahara 1
gantiTextMurid('#bendahara1', 27)
// Bendahara 2
gantiTextMurid('#bendahara2', 17)


// Data Pelajaran
const mainPelajaran = document.querySelector('#pelajaran .container .main-cardPelajaran');
dataPelajaran.forEach(data => {
  let elPelajaran1 = ``,
  elPelajaran2 = ``,
  elPelajaran3 = `</div>
            </div>`;
            
  // Ambil Data Hari
  elPelajaran1 += `<div class="cardPelajaran">
            <h2 class="hariPelajaran">${data.hari}</h2>
            <div class="content-mapel">`
  
  // Ambil Data Pelajaran 
  data.pelajaran.forEach(pelajaran => {
    elPelajaran2 += `<div class="mapel">
                <span>${pelajaran.nama}</span>
                <span>${pelajaran.jam}</span>
              </div>`
  })
  
  mainPelajaran.innerHTML += elPelajaran1 + elPelajaran2 + elPelajaran3;
})

// Data Piket Kelas 
const mainPiket = document.querySelector('#piket .container .main-cardPiket');
dataPiket.forEach(data => {
  let elPiket1 = ``,
  elPiket2 = ``,
  elPiket3 = `</ul>
            </div>
          </div>`;
            
  // Ambil Data Hari
  elPiket1 += `<div class="cardPiket" data-hari="${data.hari}">
            <h2 class="hariPiket">${data.hari}</h2>
            <div class="content-piket">
              <ul>`
  
  // Ambil Data Pelajaran 
  data.murid.forEach(nama => {
    elPiket2 += `<li>${nama}</li>`
  })
  
  mainPiket.innerHTML += elPiket1 + elPiket2 + elPiket3;
});

// Data Card Siswa
const mainCard = document.querySelector("#siswa .container .main")
let mainCardDoc = "";
dataMurid.forEach(data => {
  mainCardDoc += `<div class="card">
            <div class="box">
              <div class="contentCard">
                <h2 style="${data.nama.length >= 20 ? 'font-size: 1rem;' : 'font-size: 1.2rem;'}">
                  ${data.nama}
                </h2>
                <ul>
                  <li>Peran<span>${data.peran}</span></li>
                  <li>Gender<span>${data.gender}</span></li>
                  <li>Absen<span>${data.absen}</span></li>
                </ul>
              </div>
            </div>
            <div class="circle">
              <img src="img/siswa_${data.gender}.png" alt="Foto Profil" />
            </div>
          </div>`;
  mainCard.innerHTML = mainCardDoc;
});

// SHOW IMAGE 
const galleryDiv = document.querySelector(".gallery-content");
const showImageDiv = document.querySelector('.showImage')
const imageSlide = document.querySelector(".imageSlide");
const imageShowSlide = document.querySelector(".showImage .image");
const captionImage = document.querySelector(".showImage .caption p");

let pathImg = "img/gallery/"
let images = [
  {img: "mpls.jpg", caption: "Ini Adalah Foto Pertama Kali Kita Bertemu Diwaktu Mpls Sekolah SMKN 8 JEMBER, Dan Berfoto Bareng Di Aula Bersama Wali Kelas Bu Ita Rismawati"},
  {img: "lakiProgli.jpg", caption: "Ini Adalah Foto Semua Laki Laki Yang Ada Dikelas Kami Ketika Menggunakan Baju Program Pelatihan / Sragam Praktek Dikelas"},
  {img: "karnaval17_2023.jpg", caption: "Ini Adalah Foto Siswa Siswi Kami Yang Mengikuti Pramuka Dan Tampil Di Karnaval 17 Agustus 2023 Di Semboro Jember Jawa Timur"},
  {img: "eksplorTanamanSmk.jpg", caption: "Ini Adalah Foto Siswa Siswi Kami Ketika Disuruh Untuk Meneliti Tanaman Dan Dijadikan Bahan Presentasi Teks LHO Bersama Ibu Guru Tercatik, Bu. Shandra :)"},
  {img: "diskusiDrama1.jpg", caption: "Ini Adalah Foto Kami Ketika Mendiskusikan Drama Yang Akan Dibuat Ketika Acara Maulid Nabi Pada Rabu 27 September 2023 Dirumah Salah Satu Siswi Repeltu"},
  {img: "pembuatanDrama1.jpg", caption: "Ini Adalah Foto Kami Ketika Membuat Drama Yang Akan Ditampilkan Ketika Acara Maulid Nabi Pada Rabu 27 September 2023 Dirumah Salah Satu Siswi Repeltu Dan Disuguhkan Konsumsi :)"},
  {img: "jotaJotiPramuka2023.jpg", caption: "Ini Adalah Foto Siswa Siswi Kami Yang Mengikuti Eskul Pramuka Ketika Mengikuti Lomba Jota Joti Pada Hari Rabu Tanggal 20 - 23 Oktober 2023 Bertempat Di Universitas dr. SOEBANDI Jember Jawa Timur"},
  {img: "hariWayang.jpg", caption: "Ini Adalah Foto Siswa Siswi Kami Yang Mengikuti Eskul Pramuka Ketika Dimintai Bantuan Oleh Desa Untuk Penyambutan Tamu Menggunakan Obor Ketika Hari Wayang Nasional 7 November 2023 Di Balai Desa Semboro"},
];

images.forEach(img => {
  galleryDiv.innerHTML += `<a href="${pathImg + img.img}" class="showImageImg" data-path="${pathImg + img.img}"><img src="${pathImg + img.img}" alt="${pathImg + img.img}"/></a>`
  imageSlide.innerHTML += `<a href="${pathImg + img.img}" class="slideImageImg" data-path="${pathImg + img.img}"><img src="${pathImg + img.img}" alt="${pathImg + img.img}"/></a>`
  imageShowSlide.innerHTML += `<img src="${pathImg + img.img}" alt="${pathImg + img.img}" data-caption="${img.caption}"/>`
});

let imageSlidePosisi = 0;
document.addEventListener('DOMContentLoaded', () => {
  let allImageShow = document.querySelectorAll('.showImage .image img');
  let allSlideImageImg = document.querySelectorAll('.slideImageImg');
  let allshowImageInPage = document.querySelectorAll('.showImageImg');
  
  // Bila Gambar Pilihan Diklik, Tampilkan Diatas
  const gantiImageClickImg = (element, activeElement = false) => {
    
    element.forEach(el => {
      el.addEventListener('click', (event) => {
        event.preventDefault();
        
        if(activeElement) {
          activeElement.classList.add('active');
        }
        
        images.forEach((img, index) => {
          if(el.dataset.path == `${pathImg + img.img}`) {
            imageSlidePosisi = index;
            gantiImage();
          }
        })
        
      })
      
    })
  }
  
  // Ketikan Di Klik Di Halaman Show Image
  gantiImageClickImg(allSlideImageImg);
  
  // Ketika Di Klik Di Halaman Utama
  gantiImageClickImg(allshowImageInPage, showImageDiv);
  
  // Geserkan Semua Kekanan, Maka Akan Menerapkan Animasi Geser Dari Kanan
  allImageShow.forEach((img, index) => {
    img.style.left = `${index * 100}%`;
  })
  
  const gantiImage = () => {
    allImageShow.forEach((img, index) => {
      // Loop Image, Geser Terus
      if(imageSlidePosisi >= images.length) {
        imageSlidePosisi = 0;
      } else if(imageSlidePosisi < 0)  {
        imageSlidePosisi = images.length - 1;
      }
      
      // Cek Image Yang Lagi Ditampilkan, Dan Berikan Kelas Active
      if(allSlideImageImg[imageSlidePosisi].dataset.path == img.alt) {
        allSlideImageImg[imageSlidePosisi].classList.add('active');
        
        captionImage.style.opacity = 0;
        captionImage.innerText = allImageShow[index].dataset.caption;
        setTimeout(() => captionImage.style.opacity = 1, 300);
        
      } else {
        allSlideImageImg[index].classList.remove('active');
      }
      
      // Tampilkan image, Animasikan Dari Kanan
      img.style.transform = `translateX(-${imageSlidePosisi * 100}%)`;
      
    })
  }
  
  gantiImage();
  
  // Button Pindah Image
  document.querySelector('#slideSebelumnya').addEventListener('click', () => {
    imageSlidePosisi--;
    gantiImage();
  })
  document.querySelector('#slideSetelahnya').addEventListener('click', () => {
    imageSlidePosisi++;
    gantiImage();
  })
  
  // Ketika Button Close Diklik Tutup Halaman Show Image
  document.querySelector('.closeShowImage').addEventListener('click', () => {
    showImageDiv.classList.remove('active')
  })
  
  // Untuk Card Piket 
  let hariPiketClick = "";
  document.querySelectorAll('.cardPiket').forEach(element => {
    element.addEventListener('click', (e) => {
      element.classList.remove('active')
      e.classList.add('active');
    })
    
  })
  
})

// Menu Click 
const mainMenu = document.querySelector('.main-menu')
const menuToggle = document.querySelector('.menuToggle')

menuToggle.addEventListener('click', () => {
  mainMenu.classList.toggle('active');
})

// Tema Mode Klik 
const temaModeButton = document.querySelector('#temaModeButton')
temaModeButton.addEventListener('click', () => {
  temaModeButton.classList.toggle('active')
  document.body.classList.toggle('darkMode')
})

// Waktu Klik
document.querySelector('#kalenderButton').addEventListener('click', () => {
  document.querySelector('.kalender').classList.toggle('active')
})
document.querySelector('.closeKalender').addEventListener('click', () => {
  document.querySelector('.kalender').classList.remove('active')
})

// Back To Top Button Click
document.querySelector('#backToTop').addEventListener('click', () => {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, dst
})

// Atur Waktu 
const opsiWaktu = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', timeZoneName: 'short', timeZone: 'Asia/Jakarta' };
const formatWaktu = new Intl.DateTimeFormat('id-ID', opsiWaktu);

// Atur Element Waktu 
const tanggalEl = document.querySelector('.tanggal-hari h1'),
hariEl = document.querySelector('.tanggal-hari h4'),
bulanEl = document.querySelector('.bulan h3'),
tahunEl = document.querySelector('.tahun h3'),
jamEl = document.querySelector('.jam span');

const gantiWaktu = () => {
  const waktu = new Date();
  let waktuSekarang = formatWaktu.format(waktu);
  waktuSekarang = waktuSekarang.split(" ");
  
  setTimeout(gantiWaktu, 1000);
  // Ganti Text Dalam Element
  tanggalEl.innerText = waktuSekarang[1];
  hariEl.innerText = waktuSekarang[0].replace(',', '');
  bulanEl.innerText = waktuSekarang[2];
  tahunEl.innerText = waktuSekarang[3];
  jamEl.innerText = waktuSekarang[5].replace('.', ' : ').replace('.', ' : ');
}
gantiWaktu();